<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="./style.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
</head>
<body>
	<div class="component4 card d-flex flex-row align-items-start p-4" style="font-family: 'Nunito', sans-serif; border-radius: 20px; border-color: #f1f1f1;">
		<div class="position-relative" style="width: 10%;" data-toggle="tooltip" title="Chanh tươi">
			<a class="stretched-link" href="#"></a>			
			<img src="https://vaperz.co.uk/wp-content/uploads/Lemon-E-Liquid.jpg" class="w-100" alt="">
		</div>
		<div class="d-flex" style="width: 85%; margin-left: 5%;">
			<div style="width: 60%;">
				<a href="#" class="title" style="text-decoration: none; transition: 200ms; font-size: 16px;" data-toggle="tooltip" title="Chanh tươi">Chanh tươi</a>

				<div class="font-weight-bold" style="color: #99cc00; font-size: 17px;">
					<span>30.000</span>
					<span><u>đ</u></span>
				</div>
				<div style="font-size: 17px;">
					<del style="color: #6D6B6A">
						45.000
						<span><u>đ</u></span>
					</del>
				</div>	
			</div>
			<div class="d-flex" style="width: 20%;">
				<button onclick="decreaseQuantity()" class="d-flex justify-content-center align-items-center mr-1" style="width: 1.6rem; height: 1.6rem; cursor: pointer; border-radius: 50%; font-size: 15px; text-decoration: none; outline: none; border: 1px solid #99cc00; background-color: #FFF;">-</button>
				<input type="number" id="quantity" onblur="setNumber()" onkeyup="checkNumber(event, this)" class="mr-1 text-center p-1" style="height: 1.6rem; width: 1.6rem; border-radius: 50%; outline: none; border: 1px solid #99cc00; background-color: #FFF; font-size: 14px;" />				
				<button onclick="increaseQuantity()" class="d-flex justify-content-center align-items-center mr-1" style="width: 1.6rem; height: 1.6rem; cursor: pointer; border-radius: 50%; font-size: 15px; text-decoration: none; outline: none; border: 1px solid #99cc00; background-color: #FFF;">+</button>
			</div>
			<div class="text-right" style="width: 20%;">
				<div class="mb-2" style="font-size: 16px; color: #6D6B6A;">Tổng tiền:</div>
				<div class="mb-2 font-weight-bold" style="color: #99cc00; font-size: 17px;">
					<span id="number">30000</span>
					<span><u>đ</u></span>
				</div>
				<div style="font-size: 16px; color: #6D6B6A; cursor: pointer;" data-toggle="tooltip" title="Xóa">
					<i class="fas fa-trash mr-1" style="font-size: 12px;"></i>
					<span>Xóa</span>
				</div>	
			</div>
		</div>

	</div>

	<script type="text/javascript">	
		function checkNumber(e, input) {
			let quantity = document.getElementById("quantity").value;
			let code = (e.keyCode ? e.keyCode : e.which);
			if(code == 13) { //Enter keycode
				if (quantity === "" || quantity == 0) {
					quantity = 1;
					document.getElementById("quantity").value = quantity;
				}

				sumMoney(quantity);
			}

			if (parseInt(quantity) > 99) {
				quantity = parseInt(quantity.slice(0,2));
				document.getElementById("quantity").value = quantity;
			}
			
		}

		function setNumber() {
			let quantity = document.getElementById("quantity").value;
			if (quantity === "") {
				quantity = 1;
				document.getElementById("quantity").value = quantity;
			}

			sumMoney(quantity);
		}

		function increaseQuantity() {
			let quantity = document.getElementById("quantity").value;

			if(parseInt(quantity) < 99) {
				quantity = parseInt(quantity) + 1;
				document.getElementById("quantity").value = quantity;
				sumMoney(quantity);
			}
		}

		function decreaseQuantity() {
			let quantity = document.getElementById("quantity").value;

			if(parseInt(quantity) > 1) {
				quantity = parseInt(quantity) - 1;
				document.getElementById("quantity").value = quantity;
				sumMoney(quantity);
			}
		}

		function sumMoney(quantity) {
			if(quantity !== "") {
				document.getElementById("number").innerText = 30000*quantity;
				formatNumber();
			}
		}

		function formatNumber() {
			let quantity = document.getElementById("quantity").value;
			if (quantity === "") {
				quantity = 1;
				document.getElementById("quantity").value = quantity;
			}

			let num = document.getElementById("number").innerText;
			document.getElementById("number").innerText = num.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
		}

		window.onload = formatNumber();
	</script>
</body>
</html>


